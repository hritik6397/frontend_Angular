{"ast":null,"code":"import { ShopParams } from '../shared/models/shopParams';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shop.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../shared/components/paging-header/paging-header.component\";\nimport * as i5 from \"./product-item/product-item.component\";\nimport * as i6 from \"../shared/components/pager/pager.component\";\nconst _c0 = [\"search\"];\n\nfunction ShopComponent_ng_container_3_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sort_r8 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"selected\", ctx_r4.shopParams.sort === sort_r8.value)(\"value\", sort_r8.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sort_r8.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵlistener(\"click\", function ShopComponent_ng_container_3_li_8_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const category_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.onCategorySelected(category_r9.id);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const category_r9 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", category_r9.id === ctx_r5.shopParams.categoryId);\n    i0.ɵɵproperty(\"value\", category_r9.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r9.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵlistener(\"click\", function ShopComponent_ng_container_3_li_12_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const type_r12 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.onTypeSelected(type_r12.id);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r12 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", type_r12.id === ctx_r6.shopParams.typeId);\n    i0.ɵɵproperty(\"value\", type_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", type_r12.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵlistener(\"click\", function ShopComponent_ng_container_3_li_16_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const brand_r15 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.onBrandSelected(brand_r15.id);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const brand_r15 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", brand_r15.id === ctx_r7.shopParams.brandId);\n    i0.ɵɵproperty(\"value\", brand_r15.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", brand_r15.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h5\", 10);\n    i0.ɵɵtext(2, \"Sort\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 11);\n    i0.ɵɵlistener(\"change\", function ShopComponent_ng_container_3_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onSortSelected($event.target.value);\n    });\n    i0.ɵɵtemplate(4, ShopComponent_ng_container_3_option_4_Template, 2, 3, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h5\", 13);\n    i0.ɵɵtext(6, \"Categories\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\", 14);\n    i0.ɵɵtemplate(8, ShopComponent_ng_container_3_li_8_Template, 2, 4, \"li\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h5\", 13);\n    i0.ɵɵtext(10, \"Types\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ul\", 14);\n    i0.ɵɵtemplate(12, ShopComponent_ng_container_3_li_12_Template, 2, 4, \"li\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"h5\", 13);\n    i0.ɵɵtext(14, \"Brands\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"ul\", 16);\n    i0.ɵɵtemplate(16, ShopComponent_ng_container_3_li_16_Template, 2, 4, \"li\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.sortOptions);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categories);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.types);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.brands);\n  }\n}\n\nfunction ShopComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵelementStart(1, \"input\", 20, 21);\n    i0.ɵɵlistener(\"keyup.enter\", function ShopComponent_div_7_Template_input_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.onSearch();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_7_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.onSearch();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ShopComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelement(1, \"app-product-item\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r24);\n  }\n}\n\nfunction ShopComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"app-pager\", 26);\n    i0.ɵɵlistener(\"pageChanged\", function ShopComponent_div_10_Template_app_pager_pageChanged_1_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.onPageChanged($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pageSize\", ctx_r3.shopParams.pageSize)(\"totalCount\", ctx_r3.totalCount)(\"pageNumber\", ctx_r3.shopParams.pageNumber);\n  }\n}\n\nexport let ShopComponent = /*#__PURE__*/(() => {\n  class ShopComponent {\n    constructor(shopService) {\n      this.shopService = shopService;\n      this.sortOptions = [{\n        name: 'Alphabetical',\n        value: 'name'\n      }, {\n        name: 'Price: Low to high',\n        value: 'priceAsc'\n      }, {\n        name: 'Price: High to low',\n        value: 'priceDesc'\n      }];\n      this.shopParams = this.shopService.getShopParams();\n    }\n\n    ngOnInit() {\n      this.getProducts(true);\n      this.getCategories();\n      this.getTypes();\n      this.getBrands();\n    }\n\n    getProducts(useCache = false) {\n      this.shopService.getProducts(useCache).subscribe(response => {\n        this.products = response.data;\n        this.totalCount = response.count;\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    getCategories() {\n      this.shopService.getCategories().subscribe(response => {\n        this.categories = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    getTypes() {\n      this.shopService.getTypes().subscribe(response => {\n        this.types = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    getBrands() {\n      this.shopService.getBrands().subscribe(response => {\n        this.brands = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    onCategorySelected(categoryId) {\n      const params = this.shopService.getShopParams();\n      params.categoryId = categoryId;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onTypeSelected(typeId) {\n      const params = this.shopService.getShopParams();\n      params.typeId = typeId;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onBrandSelected(brandId) {\n      const params = this.shopService.getShopParams();\n      params.brandId = brandId;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onSortSelected(sort) {\n      const params = this.shopService.getShopParams();\n      params.sort = sort;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onPageChanged(event) {\n      const params = this.shopService.getShopParams();\n\n      if (params.pageNumber !== event) {\n        params.pageNumber = event;\n        this.shopService.setShopParams(params);\n        this.getProducts(true);\n      }\n    }\n\n    onSearch() {\n      const params = this.shopService.getShopParams();\n      params.search = this.searchTerm.nativeElement.value;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onReset() {\n      this.searchTerm.nativeElement.value = '';\n      this.shopParams = new ShopParams();\n      this.shopService.setShopParams(this.shopParams);\n      this.getProducts();\n    }\n\n  }\n\n  ShopComponent.ɵfac = function ShopComponent_Factory(t) {\n    return new (t || ShopComponent)(i0.ɵɵdirectiveInject(i1.ShopService));\n  };\n\n  ShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShopComponent,\n    selectors: [[\"app-shop\"]],\n    viewQuery: function ShopComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchTerm = _t.first);\n      }\n    },\n    decls: 11,\n    vars: 7,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-3\"], [4, \"ngIf\"], [1, \"col-9\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"pb-2\"], [3, \"totalCount\", \"pageNumber\", \"pageSize\"], [\"class\", \"form-inline mt-2\", 4, \"ngIf\"], [\"class\", \"col-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [1, \"text-warning\", \"ml-3\", \"mt-3\", \"mb-4\"], [1, \"custom-select\", \"mb-4\", 3, \"change\"], [3, \"selected\", \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-warning\", \"ml-3\"], [1, \"list-group\", \"my-3\"], [\"class\", \"list-group-item\", 3, \"active\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"mb-3\"], [3, \"selected\", \"value\"], [1, \"list-group-item\", 3, \"value\", \"click\"], [1, \"form-inline\", \"mt-2\"], [\"type\", \"text\", \"text\", \"\", \"placeholder\", \"Type Then Hit Enter To Search...\", 1, \"form-control\", 3, \"keyup.enter\"], [\"search\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"fa\", \"fa-search\", \"my-2\", 3, \"click\"], [1, \"col-4\", \"mb-4\"], [3, \"product\"], [1, \"d-flex\", \"justify-content-center\"], [3, \"pageSize\", \"totalCount\", \"pageNumber\", \"pageChanged\"]],\n    template: function ShopComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"section\", 2);\n        i0.ɵɵtemplate(3, ShopComponent_ng_container_3_Template, 17, 4, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"section\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelement(6, \"app-paging-header\", 6);\n        i0.ɵɵtemplate(7, ShopComponent_div_7_Template, 4, 0, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 1);\n        i0.ɵɵtemplate(9, ShopComponent_div_9_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ShopComponent_div_10_Template, 2, 3, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.types && ctx.brands && ctx.categories);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"totalCount\", ctx.totalCount)(\"pageNumber\", ctx.shopParams.pageNumber)(\"pageSize\", ctx.shopParams.pageSize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.products);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.totalCount > 0);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i4.PagingHeaderComponent, i5.ProductItemComponent, i6.PagerComponent],\n    styles: [\".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#e95620b4;border-radius:10px}.form-control[_ngcontent-%COMP%]{width:500px}.col-3[_ngcontent-%COMP%]{margin-left:-50px}.col-9[_ngcontent-%COMP%]{margin-left:50px}\"]\n  });\n  return ShopComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}